<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>跨域请求</title>
</head>

<body>
    <input type="button" value="跨域-jsonp" id="btn1">
    <input type="button" value="跨域-cors" id="btn2">
    <input type="button" value="跨域-服务器代理" id="btn3">
</body>
<script src="js/jquery.min.js"></script>
<script>
    (() => {

        //jsonp跨域
        $('#btn1').click(() => {
            $.ajax({
                type: 'get',
                url: 'http://localhost:1920/option/jsonp',
                dataType: 'jsonp',
                jsonp: 'callback',
                success: data => {
                    console.log(data);
                }
            });
        });

        //cors跨域
        $('#btn2').click(() => {
            $.ajax({
                type: 'get',
                url: 'http://localhost:1920/option/cors',
                success: data => {
                    console.log(data);
                }
            });
        });

        //服务器代理
        // $('#btn3').click(() => {
        //     $.ajax({
        //         type: 'get',
        //         url: 'https://m.weibo.cn/api/config/list', //禁止跨域，没有开放此接口。需要代理
        //         success: data => {
        //             console.log(data);
        //         }
        //     });
        // });

        //服务器代理
        $('#btn3').click(() => {
            // $.ajax({
            //     type: 'get',
            //     url: '/sinaapi/api/config/list', //禁止跨域，没有开放此接口。需要代理
            //     success: data => {
            //         console.log(data);
            //     }
            // });

            $.ajax({
                type: 'get',
                url: '/option/sinaapi/api/config/list', //'Access-Control-Allow-Origin' 现在就属于跨域
                dataType: 'json',
                success: data => {
                    console.log(data);
                }
            });
        });



    })();
</script>

</html>